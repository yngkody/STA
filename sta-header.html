<!-- ====================== HEADER (STA nav + cart badge) ====================== -->
<section class="sta-banner is-top" role="contentinfo" aria-label="Site banner">
  <style>
    :root{
      --ink:#111; --dim:#5b606b; --accent:#c71f2d; --bg:#fdfcf9;
      --panel:#fff; --line:#e6e6e6; --shadow:0 12px 34px rgba(16,24,40,.10);
      --cap:#ffffff; --max:1200px; --padX:clamp(12px,3.4vw,24px); --padY:clamp(10px,1.8vw,14px);
    }

    .sta-banner{
      font:15px/1.45 system-ui,-apple-system,"Segoe UI",Inter,Roboto,"Helvetica Neue",Arial,sans-serif;
      color:var(--ink); background:var(--bg); width:100%; isolation:isolate;
      border-bottom:1px solid var(--line);
      position:sticky; top:0; z-index:9999;
      backdrop-filter:saturate(1.1);
      overflow:visible;
    }
    .sta-banner .wrap{ max-width:var(--max); margin:0 auto; padding:var(--padY) var(--padX); position:relative; }
    .sta-banner .wrap::before{
      content:""; position:absolute; inset:4px 6px auto 6px; height:60px;
      background:linear-gradient(180deg,#fff,#fafafa); opacity:.55; pointer-events:none; border-radius:14px; box-shadow:var(--shadow);
    }
    .sta-banner .row{ position:relative; z-index:2; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }

    .sta-brand{ display:flex; align-items:center; gap:8px; min-width:0; background:var(--cap);
      border:1px solid var(--line); border-radius:999px; padding:8px 12px; box-shadow:0 8px 22px rgba(0,0,0,.04);}
    .sta-mark{ width:32px; height:32px; border-radius:50%; background:
      radial-gradient(closest-side,#fff 0 62%,transparent 63%),
      conic-gradient(var(--accent),var(--accent)); box-shadow:inset 0 0 0 1px rgba(0,0,0,.06); position:relative; flex:0 0 32px;}
    .sta-mark::after{ content:"STA"; position:absolute; inset:0; display:grid; place-items:center;
      font:700 10px/1 system-ui,-apple-system,"Segoe UI",Inter,sans-serif; color:#111; letter-spacing:.6px; mix-blend-mode:screen; opacity:.95; }
    .sta-text{ display:flex; flex-direction:column; min-width:0; }
    .sta-text .top{ font-weight:700; letter-spacing:.2px; font-size:clamp(13px,2vw,14px); color:#111; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .sta-text .sub{ color:var(--dim); font-size:clamp(12px,1.8vw,13px); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .sta-right{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-left:auto; }

    .sta-actions{ display:flex; gap:8px; flex-wrap:wrap; }
    .sta-chip{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background:var(--cap); border:1px solid var(--line); text-decoration:none; color:var(--ink);
      transition:transform .12s ease, box-shadow .12s ease; font-weight:600; font-size:14px; }
    .sta-chip:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.06); }
    .sta-chip .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 2px #fff inset; }

    .sta-icons{ display:flex; gap:8px; }
    .sta-iconbtn{ display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius:999px;
      background:var(--cap); border:1px solid var(--line); text-decoration:none; color:var(--ink);
      transition:transform .12s ease, box-shadow .12s ease; }
    .sta-iconbtn:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.06); }
    .sta-iconbtn svg{ width:18px; height:18px; display:block; }
    .sta-cart{ position:relative; }
    .sta-cart .badge{ position:absolute; top:-6px; right:-6px; min-width:16px; height:16px; padding:0 4px; border-radius:999px; background:var(--accent); color:#fff; font:700 10px/16px system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif; text-align:center; }

    .sta-camo{
      width:100%; height:96px;
      background-image:url('https://images.squarespace-cdn.com/content/v1/68f9286f24ab7f4313a8fdb1/56a14432-1556-4e22-9869-d22e4ec74fe6/ChatGPT+Image+Oct+22%2C+2025%2C+04_11_48+PM.png?format=2500w');
      background-size:cover; background-position:center; background-repeat:no-repeat;
      border-top:1px solid var(--line); transition:height .25s ease, opacity .25s ease;
    }
    .sta-banner.is-scrolled .sta-camo{ height:0; opacity:0; border-top:0; overflow:hidden; }

    @media (max-width:640px){
      .sta-banner .wrap{ padding:10px var(--padX) 12px; }
      .sta-banner .wrap::before{ height:56px; inset:4px 4px auto 4px; }
      .sta-banner .row{ gap:10px; }
      .sta-right{ width:100%; justify-content:space-between; }
      .sta-actions{ flex:1 1 auto; min-width:200px; }
      .sta-chip{ padding:8px 10px; font-size:13px; }
      .sta-camo{ height:88px; }
    }

    /* Snipcart must sit above header */
    #snipcart, .snipcart { z-index: 2147483000 !important; position: relative; }
    html.snipcart-open .sta-banner { z-index: 1 !important; pointer-events: none; }
    @media (max-width: 820px){ html.snipcart-open .sta-banner { position: static !important; } }
    html.snipcart-open, html.snipcart-open body { overflow: hidden; }

    .sta-banner a:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
    .sta-banner .wrap{ padding-inline:max(var(--padX),env(safe-area-inset-left)) max(var(--padX),env(safe-area-inset-right)); }
  </style>

  <div class="wrap" role="presentation">
    <div class="row">
      <div class="sta-brand" aria-label="STA brand banner">
        <i class="sta-mark" aria-hidden="true"></i>
        <div class="sta-text">
          <div class="top">STA — New York</div>
          <div class="sub">Quality Flower • Culture & Community</div>
        </div>
      </div>

      <div class="sta-right">
        <nav class="sta-actions" aria-label="Quick links">
          <a class="sta-chip" data-href="/"><span class="dot" aria-hidden="true"></span> Home</a>
          <a class="sta-chip" data-href="/products/"><span class="dot" aria-hidden="true"></span> Products</a>
          <a class="sta-chip" data-href="/merch/"><span class="dot" aria-hidden="true"></span> Merch</a>
          <a class="sta-chip" data-href="/about/"><span class="dot" aria-hidden="true"></span> About</a>
          <a class="sta-chip" data-href="/stores/"><span class="dot" aria-hidden="true"></span> Store Locator</a>
        </nav>

        <nav class="sta-icons" aria-label="Social and cart">
          <a class="sta-iconbtn" href="https://instagram.com/yourhandle" target="_blank" rel="noopener" aria-label="Instagram">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.7"/>
              <circle cx="12" cy="12" r="4.2" stroke="currentColor" stroke-width="1.7"/>
              <circle cx="17.5" cy="6.5" r="1.2" fill="currentColor"/>
            </svg>
          </a>
          <a class="sta-iconbtn" href="https://x.com/yourhandle" target="_blank" rel="noopener" aria-label="Twitter (X)">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 4l7.5 8.3L4.7 20h2.1l6.1-6.6 5 6.6H20l-7-9.2L19.3 4h-2.1l-5.6 6.1L7 4H4z" fill="currentColor"/>
            </svg>
          </a>
          <a class="sta-iconbtn sta-cart" href="#" data-action="open-cart" aria-label="Cart">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M3 4h2l2.2 11.2a2 2 0 0 0 2 1.6h7.5a2 2 0 0 0 2-1.6L20 8H7.1" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="10" cy="20" r="1.6" fill="currentColor"/>
              <circle cx="17" cy="20" r="1.6" fill="currentColor"/>
            </svg>
            <span class="badge" id="staCartCount" aria-live="polite">0</span>
          </a>
        </nav>
      </div>
    </div>
  </div>

  <div class="sta-camo" aria-hidden="true"></div>

  <script id="sta-snipcart-glue">
  (function(){
    const badge = () => document.getElementById('staCartCount');
    const bump  = el => { if(!el) return; el.style.transition='transform .14s'; el.style.transform='scale(1.08)'; setTimeout(()=>el.style.transform='scale(1)',140); };

    // Keep qty in the button before Snipcart reads it
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.snipcart-add-item');
      if(!btn) return;
      const card = btn.closest('.item, .sta-item, article, .product, .row') || document;
      const sel  = card.querySelector('.qty, select[data-qty], select[name="quantity"]');
      const q    = parseInt(sel?.value || '1', 10) || 1;
      btn.setAttribute('data-item-quantity', String(q));
    }, true);

    // Open cart from your header icon
    document.addEventListener('click', (e) => {
      const open = e.target.closest('[data-action="open-cart"]');
      if(!open || !window.Snipcart?.api) return;
      e.preventDefault();
      window.Snipcart.api.theme.cart.open();
    });

    // Bind to Snipcart with a resilient poller
    function bind(){
      if(!window.Snipcart?.api) return false;
      const api = window.Snipcart.api;

      api.cart.get().then(c => {
        const n = c?.items?.count || 0;
        if(badge()) badge().textContent = String(n);
      });

      document.addEventListener('snipcart.cart.updated', (e) => {
        const n = e?.detail?.cart?.items?.count || 0;
        if(badge()){ badge().textContent = String(n); bump(badge()); }
      });

      document.addEventListener('snipcart.cart.opened',        ()=>document.documentElement.classList.add('snipcart-open'));
      document.addEventListener('snipcart.cart.closed',        ()=>document.documentElement.classList.remove('snipcart-open'));
      document.addEventListener('snipcart.checkout.started',   ()=>document.documentElement.classList.add('snipcart-open'));
      document.addEventListener('snipcart.checkout.confirmed', ()=>document.documentElement.classList.remove('snipcart-open'));
      return true;
    }

    if(!bind()){
      let tries = 0; const iv = setInterval(()=>{ tries++; if(bind() || tries>80) clearInterval(iv); }, 200);
    }
  })();
  </script>
</section>
<!-- ====================== /HEADER ====================== -->

<!-- ====================== Snipcart root + script (keep in body) ====================== -->
<!-- IMPORTANT: Paste your REAL API key below on ONE line (no line breaks). -->
<div hidden id="snipcart" data-api-key="YOUR_SNIPCART_API_KEY"></div>
<script defer src="https://cdn.snipcart.com/themes/v3.6.0/default/snipcart.js"></script>
